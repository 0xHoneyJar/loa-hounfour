{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.0xhoneyjar.com/loa-hounfour/8.2.0/scoring-path-log",
  "additionalProperties": false,
  "description": "Audit record of which scoring cascade tier was used. Optional hash chain for tamper-evident audit.",
  "type": "object",
  "required": [
    "path"
  ],
  "properties": {
    "path": {
      "$id": "ScoringPath",
      "description": "Which tier of the scoring cascade was used for a reputation decision.",
      "anyOf": [
        {
          "const": "task_cohort",
          "type": "string"
        },
        {
          "const": "aggregate",
          "type": "string"
        },
        {
          "const": "tier_default",
          "type": "string"
        }
      ]
    },
    "model_id": {
      "maxLength": 255,
      "description": "Model alias when path is task_cohort or aggregate.",
      "type": "string"
    },
    "task_type": {
      "$id": "TaskType",
      "description": "Task categories for reputation scoring. Protocol types are literals; community types use namespace:type format.",
      "anyOf": [
        {
          "const": "code_review",
          "type": "string"
        },
        {
          "const": "creative_writing",
          "type": "string"
        },
        {
          "const": "analysis",
          "type": "string"
        },
        {
          "const": "summarization",
          "type": "string"
        },
        {
          "const": "general",
          "type": "string"
        },
        {
          "pattern": "^[a-z][a-z0-9_-]+:[a-z][a-z0-9_]+$",
          "description": "Community-defined task type in namespace:type format (e.g., legal-guild:contract_review).",
          "type": "string"
        }
      ]
    },
    "reason": {
      "maxLength": 500,
      "description": "Human-readable explanation of why this path was selected.",
      "type": "string"
    },
    "scored_at": {
      "format": "date-time",
      "description": "Timestamp of the scoring decision.",
      "type": "string"
    },
    "entry_hash": {
      "pattern": "^sha256:[a-f0-9]{64}$",
      "description": "SHA-256 hash of canonical JSON of this entry (excluding hash fields).",
      "type": "string"
    },
    "previous_hash": {
      "pattern": "^sha256:[a-f0-9]{64}$",
      "description": "Hash of the preceding ScoringPathLog entry in the chain.",
      "type": "string"
    }
  },
  "$comment": "contract_version=8.2.0, min_supported=6.0.0"
}
