{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.0xhoneyjar.com/loa-hounfour/5.0.0/protocol-discovery",
  "additionalProperties": false,
  "description": "Protocol discovery document for /.well-known/loa-hounfour",
  "type": "object",
  "required": [
    "contract_version",
    "min_supported_version",
    "schemas"
  ],
  "properties": {
    "contract_version": {
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Current contract version",
      "type": "string"
    },
    "min_supported_version": {
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Minimum version this endpoint supports",
      "type": "string"
    },
    "schemas": {
      "description": "List of supported schema $id URLs",
      "type": "array",
      "items": {
        "format": "uri",
        "description": "Schema $id URL",
        "type": "string"
      }
    },
    "supported_aggregates": {
      "description": "Supported aggregate types (e.g. \"agent\", \"billing\")",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "capabilities_url": {
      "format": "uri",
      "description": "URL for capability negotiation endpoint â€” connects discovery to capability queries",
      "type": "string"
    },
    "expression_versions_supported": {
      "description": "Supported constraint expression grammar versions for version negotiation",
      "type": "array",
      "items": {
        "pattern": "^\\d+\\.\\d+$",
        "description": "Constraint expression grammar version (e.g. \"1.0\", \"2.0\")",
        "type": "string"
      }
    }
  },
  "$comment": "contract_version=5.0.0, min_supported=4.0.0"
}
