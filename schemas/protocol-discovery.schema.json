{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.0xhoneyjar.com/loa-hounfour/7.10.1/protocol-discovery",
  "additionalProperties": false,
  "description": "Protocol discovery document for /.well-known/loa-hounfour",
  "type": "object",
  "required": [
    "contract_version",
    "min_supported_version",
    "schemas"
  ],
  "properties": {
    "contract_version": {
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Current contract version",
      "type": "string"
    },
    "min_supported_version": {
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Minimum version this endpoint supports",
      "type": "string"
    },
    "schemas": {
      "description": "List of supported schema $id URLs",
      "type": "array",
      "items": {
        "format": "uri",
        "description": "Schema $id URL",
        "type": "string"
      }
    },
    "supported_aggregates": {
      "description": "Supported aggregate types (e.g. \"agent\", \"billing\")",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "capabilities_url": {
      "format": "uri",
      "description": "URL for capability negotiation endpoint â€” connects discovery to capability queries",
      "type": "string"
    },
    "expression_versions_supported": {
      "description": "Supported constraint expression grammar versions for version negotiation",
      "type": "array",
      "items": {
        "pattern": "^\\d+\\.\\d+$",
        "description": "Constraint expression grammar version (e.g. \"1.0\", \"2.0\")",
        "type": "string"
      }
    },
    "providers": {
      "description": "Summary of registered model providers",
      "type": "array",
      "items": {
        "additionalProperties": false,
        "description": "Summary of a registered model provider",
        "type": "object",
        "required": [
          "provider",
          "model_count"
        ],
        "properties": {
          "provider": {
            "minLength": 1,
            "description": "Provider identifier (e.g. \"openai\", \"anthropic\")",
            "type": "string"
          },
          "model_count": {
            "minimum": 0,
            "description": "Number of active models from this provider",
            "type": "integer"
          },
          "conformance_level": {
            "description": "Highest conformance level achieved by any model from this provider",
            "type": "string"
          },
          "supports_reservations": {
            "description": "Whether this provider supports capacity reservations",
            "type": "boolean"
          },
          "reservation_enforcement": {
            "$id": "ReservationEnforcement",
            "description": "How reservation guarantees are enforced by the provider.",
            "anyOf": [
              {
                "const": "strict",
                "type": "string"
              },
              {
                "const": "advisory",
                "type": "string"
              },
              {
                "const": "unsupported",
                "type": "string"
              }
            ]
          },
          "total_capacity_tokens_per_minute": {
            "minimum": 0,
            "description": "Total capacity in tokens per minute across all models from this provider",
            "type": "integer"
          }
        }
      }
    },
    "conformance_suite_version": {
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Version of the conformance test suite used (e.g. \"5.1.0\")",
      "type": "string"
    }
  },
  "$comment": "contract_version=7.10.1, min_supported=6.0.0"
}
