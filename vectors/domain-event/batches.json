{
  "valid_batches": [
    {
      "id": "batch-001",
      "data": {
        "batch_id": "batch_xfer_001",
        "correlation_id": "corr_xfer_001",
        "events": [
          {
            "event_id": "evt_b1_001",
            "aggregate_id": "agent_abc",
            "aggregate_type": "agent",
            "type": "agent.lifecycle.transitioned",
            "version": 1,
            "occurred_at": "2026-01-15T10:00:00Z",
            "actor": "transfer-service",
            "payload": { "agent_id": "agent_abc", "from": "ACTIVE", "to": "TRANSFERRED" },
            "contract_version": "2.0.0"
          }
        ],
        "source": "transfer-service",
        "produced_at": "2026-01-15T10:00:01Z",
        "contract_version": "2.0.0"
      },
      "note": "single-event batch (minimal valid case)"
    },
    {
      "id": "batch-002",
      "data": {
        "batch_id": "batch_xfer_002",
        "correlation_id": "corr_xfer_002",
        "events": [
          {
            "event_id": "evt_b2_001",
            "aggregate_id": "agent_def",
            "aggregate_type": "agent",
            "type": "agent.lifecycle.transitioned",
            "version": 1,
            "occurred_at": "2026-01-15T10:00:00Z",
            "actor": "transfer-service",
            "payload": { "agent_id": "agent_def", "from": "ACTIVE", "to": "TRANSFERRED" },
            "contract_version": "2.0.0"
          },
          {
            "event_id": "evt_b2_002",
            "aggregate_id": "conv_sealed",
            "aggregate_type": "conversation",
            "type": "conversation.status.changed",
            "version": 1,
            "occurred_at": "2026-01-15T10:00:01Z",
            "actor": "transfer-service",
            "correlation_id": "corr_xfer_002",
            "payload": { "conversation_id": "conv_sealed", "from": "active", "to": "sealed" },
            "contract_version": "2.0.0"
          },
          {
            "event_id": "evt_b2_003",
            "aggregate_id": "01JARX_CREDIT",
            "aggregate_type": "billing",
            "type": "billing.entry.created",
            "version": 1,
            "occurred_at": "2026-01-15T10:00:02Z",
            "actor": "transfer-service",
            "correlation_id": "corr_xfer_002",
            "payload": { "billing_entry_id": "01JARX_CREDIT" },
            "contract_version": "2.0.0"
          }
        ],
        "source": "transfer-service",
        "produced_at": "2026-01-15T10:00:03Z",
        "contract_version": "2.0.0"
      },
      "note": "multi-event batch — lifecycle + conversation seal + billing (transactional outbox)"
    },
    {
      "id": "batch-003",
      "data": {
        "batch_id": "batch_meta_001",
        "correlation_id": "corr_meta_001",
        "events": [
          {
            "event_id": "evt_b3_001",
            "aggregate_id": "agent_meta",
            "aggregate_type": "agent",
            "type": "agent.lifecycle.transitioned",
            "version": 1,
            "occurred_at": "2026-01-15T11:00:00Z",
            "actor": "system",
            "payload": { "agent_id": "agent_meta" },
            "contract_version": "2.0.0",
            "metadata": { "trace_source": "loa-finn", "region": "us-east-1" }
          }
        ],
        "source": "test-service",
        "produced_at": "2026-01-15T11:00:01Z",
        "contract_version": "2.0.0"
      },
      "note": "batch with event containing metadata (BB-C2-001 — composition test)"
    },
    {
      "id": "batch-004",
      "data": {
        "batch_id": "batch_ctx_001",
        "correlation_id": "corr_ctx_001",
        "events": [
          {
            "event_id": "evt_b4_001",
            "aggregate_id": "agent_ctx",
            "aggregate_type": "agent",
            "type": "agent.lifecycle.transitioned",
            "version": 1,
            "occurred_at": "2026-01-15T12:00:00Z",
            "actor": "transfer-service",
            "payload": { "agent_id": "agent_ctx" },
            "contract_version": "2.2.0"
          }
        ],
        "source": "transfer-service",
        "produced_at": "2026-01-15T12:00:01Z",
        "contract_version": "2.2.0",
        "context": {
          "transfer_id": "xfer_001",
          "aggregate_id": "agent_ctx",
          "aggregate_type": "agent"
        }
      },
      "note": "batch with routing context (BB-V3-010 — O(1) routing)"
    },
    {
      "id": "batch-005",
      "data": {
        "batch_id": "batch_saga_fwd",
        "correlation_id": "corr_saga_001",
        "events": [
          {
            "event_id": "evt_b5_001",
            "aggregate_id": "agent_saga",
            "aggregate_type": "agent",
            "type": "agent.lifecycle.transitioned",
            "version": 1,
            "occurred_at": "2026-01-15T13:00:00Z",
            "actor": "transfer-service",
            "payload": { "agent_id": "agent_saga" },
            "contract_version": "2.2.0"
          }
        ],
        "source": "transfer-service",
        "produced_at": "2026-01-15T13:00:01Z",
        "contract_version": "2.2.0",
        "saga": {
          "saga_id": "saga_xfer_001",
          "step": 1,
          "total_steps": 3,
          "direction": "forward"
        }
      },
      "note": "batch with forward saga context (BB-V3-012)"
    },
    {
      "id": "batch-006",
      "data": {
        "batch_id": "batch_saga_comp",
        "correlation_id": "corr_saga_002",
        "events": [
          {
            "event_id": "evt_b6_001",
            "aggregate_id": "agent_comp",
            "aggregate_type": "agent",
            "type": "agent.lifecycle.transitioned",
            "version": 1,
            "occurred_at": "2026-01-15T14:00:00Z",
            "actor": "transfer-service",
            "payload": { "agent_id": "agent_comp" },
            "contract_version": "2.2.0"
          }
        ],
        "source": "transfer-service",
        "produced_at": "2026-01-15T14:00:01Z",
        "contract_version": "2.2.0",
        "saga": {
          "saga_id": "saga_xfer_001",
          "step": 2,
          "direction": "compensation"
        }
      },
      "note": "batch with compensation saga context (BB-V3-012 — rollback)"
    }
  ],
  "invalid_batches": [
    {
      "id": "batch-inv-001",
      "data": {
        "batch_id": "batch_empty",
        "correlation_id": "corr_empty",
        "events": [],
        "source": "test",
        "produced_at": "2026-01-15T10:00:00Z",
        "contract_version": "2.0.0"
      },
      "note": "empty events array rejected (minItems: 1)"
    },
    {
      "id": "batch-inv-002",
      "data": {
        "batch_id": "",
        "correlation_id": "corr_x",
        "events": [
          {
            "event_id": "evt_x",
            "aggregate_id": "x",
            "aggregate_type": "agent",
            "type": "agent.lifecycle.transitioned",
            "version": 1,
            "occurred_at": "2026-01-15T10:00:00Z",
            "actor": "test",
            "payload": {},
            "contract_version": "2.0.0"
          }
        ],
        "source": "test",
        "produced_at": "2026-01-15T10:00:00Z",
        "contract_version": "2.0.0"
      },
      "note": "empty batch_id rejected (minLength: 1)"
    }
  ]
}
