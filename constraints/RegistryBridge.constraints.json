{
  "$schema": "https://loa-hounfour.dev/schemas/constraint-file.json",
  "schema_id": "RegistryBridge",
  "origin": "genesis",
  "contract_version": "6.0.0",
  "expression_version": "1.0",
  "constraints": [
    {
      "id": "registry-bridge-distinct-registries",
      "description": "Source and target registry must be different",
      "expression": "source_registry_id != target_registry_id",
      "severity": "error",
      "category": "integrity",
      "type_signature": {
        "source_registry_id": "string",
        "target_registry_id": "string"
      }
    },
    {
      "id": "registry-bridge-invariant-unique-ids",
      "description": "Bridge invariant IDs must be unique within a bridge",
      "expression": "unique_values(bridge_invariants, 'invariant_id')",
      "severity": "error",
      "category": "integrity",
      "type_signature": {
        "bridge_invariants": "array"
      }
    },
    {
      "id": "registry-bridge-fixed-rate-requires-value",
      "description": "Fixed exchange rate must specify a value",
      "expression": "exchange_rate.rate_type != 'fixed' || exchange_rate.value != null",
      "severity": "error",
      "category": "integrity",
      "type_signature": {
        "exchange_rate": "object"
      }
    },
    {
      "id": "registry-bridge-oracle-rate-requires-endpoint",
      "description": "Oracle exchange rate must specify an oracle endpoint",
      "expression": "exchange_rate.rate_type != 'oracle' || exchange_rate.oracle_endpoint != null",
      "severity": "error",
      "category": "integrity",
      "type_signature": {
        "exchange_rate": "object"
      }
    }
  ]
}
