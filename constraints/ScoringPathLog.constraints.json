{
  "$schema": "https://loa-hounfour.dev/schemas/constraint-file.json",
  "schema_id": "ScoringPathLog",
  "origin": "genesis",
  "contract_version": "7.10.0",
  "expression_version": "1.0",
  "constraints": [
    {
      "id": "scoring-path-valid",
      "expression": "path == 'task_cohort' || path == 'aggregate' || path == 'tier_default'",
      "severity": "error",
      "message": "path must be one of: task_cohort, aggregate, tier_default",
      "fields": [
        "path"
      ],
      "type_signature": {
        "path": "string"
      }
    },
    {
      "id": "scoring-path-task-cohort-requires-context",
      "expression": "path != 'task_cohort' || (model_id != undefined && task_type != undefined)",
      "severity": "error",
      "message": "task_cohort path requires both model_id and task_type",
      "fields": [
        "path",
        "model_id",
        "task_type"
      ],
      "type_signature": {
        "path": "string",
        "model_id": "string | undefined",
        "task_type": "string | undefined"
      }
    },
    {
      "id": "scoring-path-aggregate-requires-model",
      "expression": "path != 'aggregate' || model_id != undefined",
      "severity": "error",
      "message": "aggregate path requires model_id",
      "fields": [
        "path",
        "model_id"
      ],
      "type_signature": {
        "path": "string",
        "model_id": "string | undefined"
      }
    },
    {
      "id": "scoring-path-cascade-ordering",
      "expression": "true",
      "severity": "info",
      "message": "The scoring cascade evaluates in order: task_cohort → aggregate → tier_default. Implementations SHOULD attempt the most specific path first and fall back only when data is insufficient.",
      "fields": [
        "path"
      ],
      "type_signature": {
        "path": "string"
      }
    }
  ]
}
