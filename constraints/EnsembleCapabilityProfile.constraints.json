{
  "$schema": "https://loa-hounfour.dev/schemas/constraint-file.json",
  "schema_id": "EnsembleCapabilityProfile",
  "contract_version": "5.4.0",
  "expression_version": "1.0",
  "constraints": [
    {
      "id": "ensemble-capability-models-match",
      "expression": "models.length >= 2",
      "severity": "error",
      "message": "Ensemble requires at least 2 models",
      "fields": ["models"],
      "type_signature": {
        "models": "array"
      }
    },
    {
      "id": "ensemble-capability-emergent-not-individual",
      "expression": "no_emergent_in_individual(emergent_capabilities, individual_capabilities)",
      "severity": "error",
      "message": "Emergent capability must not appear in any individual model's capability set",
      "fields": ["emergent_capabilities", "individual_capabilities"],
      "type_signature": {
        "emergent_capabilities": "array",
        "individual_capabilities": "object"
      }
    },
    {
      "id": "ensemble-capability-evidence-required",
      "expression": "all_emergent_have_evidence(emergent_capabilities, capability_evidence)",
      "severity": "error",
      "message": "Every emergent capability must have at least one evidence entry",
      "fields": ["emergent_capabilities", "capability_evidence"],
      "type_signature": {
        "emergent_capabilities": "array",
        "capability_evidence": "array"
      }
    },
    {
      "id": "ensemble-capability-individual-keys-match-models",
      "expression": "object_keys_subset(individual_capabilities, models)",
      "severity": "warning",
      "message": "individual_capabilities keys should match models array",
      "fields": ["individual_capabilities", "models"],
      "type_signature": {
        "individual_capabilities": "object",
        "models": "array"
      }
    }
  ]
}
