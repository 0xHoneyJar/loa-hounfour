{
  "$schema": "https://loa-hounfour.dev/schemas/constraint-file.json",
  "schema_id": "CollectionGovernanceConfig",
  "origin": "genesis",
  "contract_version": "7.6.0",
  "expression_version": "1.0",
  "constraints": [
    {
      "id": "config-pseudo-count-positive",
      "expression": "pseudo_count >= 1",
      "severity": "error",
      "fields": [
        "pseudo_count"
      ],
      "type_signature": {
        "pseudo_count": "number"
      },
      "message": "pseudo_count must be a positive integer (>= 1)."
    },
    {
      "id": "config-thresholds-ordered",
      "expression": "state_thresholds.warming_min_events <= state_thresholds.established_min_samples",
      "severity": "warning",
      "fields": [
        "state_thresholds"
      ],
      "type_signature": {
        "state_thresholds": "object"
      },
      "message": "State thresholds must be ordered: warming < established < authoritative."
    },
    {
      "id": "config-demotion-backward-only",
      "expression": "decay_policy.demotion_rules.every(r => r.from_state != r.to_state)",
      "severity": "error",
      "fields": [
        "decay_policy"
      ],
      "type_signature": {
        "decay_policy": "object"
      },
      "message": "Demotion rules must only demote backward in the state machine (authoritative\u2192established, established\u2192warming, warming\u2192cold)."
    }
  ]
}
